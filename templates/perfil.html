{% extends 'base_interna.html' %}
{% load static %}


{% block title %}Perfil{% endblock %}

{% block content %}
<style>
    .glass {
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  background-color: rgba(255,255,255,0.30); /* médio */
  border: 1px solid rgba(255,255,255,0.40);
}
</style>
<div class="w-11/12 h-full">
    <div class="mt-4 mb-6 flex flex-col items-start">
        <h2 class="-mt-1 text-heading-h3">Olá!</h2>
        <p class="-mt-2 text-heading-h3">{{ request.user.first_name }} {{ request.user.last_name }}</p>
    </div>

   {% if messages %}
        <div class="w-full max-w-2xl mb-6">
            {% for message in messages %}
                <div class="p-3 mb-2 rounded {{ message.tags }} bg-green-100 text-green-800">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

     <div id="mensagens" class="w-full max-w-2xl mb-6"></div>
    
    <!-- Formulários lado a lado com mais largura -->
    <div class="w-full flex flex-row gap-10 ">

        <!-- Formulário de edição de usuário -->
        <div class="w-2/4 rounded-lg">
            <form method="POST" class="flex flex-col gap-2 w-full px-8 py-9 glass rounded-xl shadow-md" name="salvar_dados" id="form-dados">
                <h3 class="text-xl font-semibold ">Alterar Dados</h3>
                {% csrf_token %}
                {{ form.non_field_errors }}

                <div class="flex gap-3 w-full">
                    <div class="w-1/2 flex flex-col gap-1">
                        {{ form.first_name.label_tag }}
                        {{ form.first_name }}
                        {{ form.first_name.errors }}
                    </div>
                    <div class="w-1/2 flex flex-col gap-1">
                        {{ form.last_name.label_tag }}
                        {{ form.last_name }}
                        {{ form.last_name.errors }}
                    </div>
                </div>

                <div class="w-full flex flex-col gap-1">
                    {{ form.username.label_tag }}
                    {{ form.username }}
                    {{ form.username.errors }}
                </div>

                <div class="w-full flex flex-col gap-1">
                    {{ form.email.label_tag }}
                    {{ form.email }}
                    {{ form.email.errors }}
                </div>

                <div class=" w-full">
                    {% if form.cargo %}
                    <div class=" flex flex-col gap-1">
                        {{ form.cargo.label_tag }}
                        {{ form.cargo }}
                        {{ form.cargo.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="flex justify-center">
                    <button type="button" id="btn-salvar-dados"
                            class="w-full px-6 py-2 bg-darkBlue-900 text-white rounded-full hover:bg-darkBlue-700 transition-colors duration-200">
                        Salvar Dados
                    </button>
                </div>
            </form>
        </div>

        <!-- Formulário de alteração de senha -->
        <div class="w-2/5 rounded-lg">
            <form method="POST" class="glass px-8 py-9 rounded-xl flex flex-col gap-2 shadow-md" name="alterar_senha" id="form-senha">
                <h3 class="text-lg font-semibold mb-2">Alterar Senha</h3>
                {% csrf_token %}
                {{ senha_form.non_field_errors }}

                <div class="flex flex-col gap-1">
                    {{ senha_form.old_password.label_tag }}
                    {{ senha_form.old_password }}
                    {{ senha_form.old_password.errors }}
                </div>

                <div class="flex flex-col gap-1">
                    {{ senha_form.new_password1.label_tag }}
                    {{ senha_form.new_password1 }}
                    {{ senha_form.new_password1.errors }}
                </div>

                <div class="flex flex-col gap-1">
                    {{ senha_form.new_password2.label_tag }}
                    {{ senha_form.new_password2 }}
                    {{ senha_form.new_password2.errors }}
                </div>

                <button type="button" name="btn-alterar-senha" id="btn-alterar-senha"
                        class="px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-500 transition-colors duration-200">
                    Alterar Senha
                </button>
            </form>
        </div>

    </div>

<script src="{% static 'js/perfil.js' %}"></script>
{% endblock %}